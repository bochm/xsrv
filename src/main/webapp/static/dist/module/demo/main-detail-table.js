define("module/demo/main-detail-table",["app/common","app/datatables","app/form"],function(e,t,n){var r={table:{id:"#table-demo-main-detail-m",options:{title:"\u660e\u7ec6\u6d4b\u8bd5\u8868",dataUrl:"ADMIN/demo/datatable/maindetail/classes",columns:[{data:"id",title:"id",visible:!1},{data:"students",title:"\u5b66\u751f",visible:!1},{data:"className",title:"\u73ed\u7ea7\u540d\u79f0"},{data:"studentCount",title:"\u5b66\u751f\u6570\u91cf"},{data:"classMaster",title:"\u73ed\u4e3b\u4efb"}],ordering:!1,paging:!0,info:!0,deleteRecord:{url:"ADMIN/demo/datatable/maindetail/classes/delete",id:"id"},addRecord:function(t){e.loadInnerPage(e.getPageContainer("#table-demo-main-detail-m"),"pages/demo/datatable/main-detail/detail-table",{act:"add"})},editRecord:function(t){e.loadInnerPage(e.getPageContainer("#table-demo-main-detail-m"),"pages/demo/datatable/main-detail/detail-table",{act:"update",formData:t.selectedRowsData()[0]})}}},init:function(e){this.table.options.params=e||{},$(this.table.id).initTable(this.table.options,function(e){})}},i={table:{id:"#table-demo-main-detail-student",options:{title:"\u660e\u7ec6\u6d4b\u8bd5\u8868-\u7ec6\u8868",dataUrl:"ADMIN/demo/datatable/maindetail/student",columns:[{data:"id",visible:!1},{data:"classId",visible:!1},{data:"no",title:"\u5b66\u53f7"},{data:"name",title:"\u59d3\u540d"},{data:"age",title:"\u5e74\u9f84"}],ordering:!1,paging:!0,info:!0,rowOperation:["edit","delete"],addEditForm:{title:"\u660e\u7ec6\u6d4b\u8bd5\u8868-\u7ec6\u8868",editModal:"#demo-main-detail-student-modal",id:"#demo-main-detail-student-form"}}},form:{id:"#demo-main-detail-class-form",submitJson:!0,autoClose:!0},init:function(e){e.act=="add"?(this.table.options.params={id:-1},this.form.formData=null,this.form.submitClear=!0,this.form.url="ADMIN/demo/datatable/maindetail/classes/add"):e.act=="update"&&(this.table.options.params={classId:e.formData.id},this.form.formData=e.formData,this.form.submitClear=!1,this.form.url="ADMIN/demo/datatable/maindetail/classes/edit");var n=$(this.form.id);n.initForm(this.form,function(n){e.act=="add"&&t.getTable(r.table.id).addRow(n),e.act=="update"&&t.getTable(r.table.id).updateSelectedRow(n)}),$(this.table.id).initTable(this.table.options,function(e){i.table.obj=e}),$(this.table.id).on("draw.dt",function(){i.table.obj!==undefined&&n.field("studentCount").val(i.table.obj.dataCount())})}};return{init:function(e){r.init({})},initDetail:function(e){console.log(e),i.init(e)}}});